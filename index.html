<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SportSphere - Social Sports Platform</title>

    <!-- Tailwind & React Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #111827; /* gray-900 */
            font-family: 'Inter', sans-serif;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1f2937; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }

        /* Animation Keyframes */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .fade-in { animation: fadeIn 1s ease-out forwards; }
        .slide-up-1 { animation: slideUp 0.8s ease-out 0.5s forwards; opacity: 0; }
        .slide-up-2 { animation: slideUp 0.8s ease-out 1.0s forwards; opacity: 0; }
        .slide-up-3 { animation: slideUp 0.8s ease-out 1.5s forwards; opacity: 0; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- React Hooks ---
        const { useState, useEffect, useMemo } = React;

        // --- Firebase Initialization ---
        const firebaseConfig = {
            apiKey: "AIzaSyCT9bFZUkQ25JUNhW00XnvUWMa1kO9fI0o",
            authDomain: "sportysphere-pwa.firebaseapp.com",
            projectId: "sportysphere-pwa",
            storageBucket: "sportysphere-pwa.appspot.com",
            messagingSenderId: "850598542865",
            appId: "1:850598542865:web:d482a25411733391157bb0",
            measurementId: "G-Q474YZP0BM"
        };
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }

        // --- MOCK DATA (Used as fallback or for sections not yet connected to APIs) ---
        const mockData = {
            posts: Array.from({ length: 20 }, (_, i) => ({
                id: `post_${i}`,
                user: { name: `User ${i+1}`, avatar: `https://placehold.co/48x48/1f2937/ffffff?text=U${i+1}` },
                content: { text: `This is a sample post to demonstrate the feed. Welcome to SportSphere! #SampleData` },
                stats: { likes: Math.floor(Math.random() * 100), comments: Math.floor(Math.random() * 20) }
            })),
            playersForPolls: {
              'Football': [
                  { id: 'player1', name: 'Striker Sam', initialVotes: 120 },
                  { id: 'player2', name: 'Midfield Maestro', initialVotes: 90 },
                  { id: 'player3', name: 'Goalie Greg', initialVotes: 70 }
              ],
              'Basketball': [
                  { id: 'player4', name: 'Dunking Dave', initialVotes: 150 },
                  { id: 'player5', name: 'Point Guard Pete', initialVotes: 110 },
                  { id: 'player6', name: 'Rebounding Ron', initialVotes: 80 }
              ]
          }
        };

        // --- ANIMATED LANDING PAGE ---
        const AnimatedLandingPage = ({ onJoinCommunity }) => (
            <div className="relative w-full min-h-screen flex flex-col justify-center items-center text-center p-4 overflow-hidden" style={{ backgroundImage: 'url(https://placehold.co/1920x1080/000000/fff?text=SportSphere+Stadium)', backgroundSize: 'cover', backgroundPosition: 'center' }}>
                <div className="absolute inset-0 bg-black bg-opacity-70 backdrop-blur-sm"></div>
                <div className="relative z-10 text-white max-w-2xl mx-auto">
                    <h1 className="text-4xl md:text-6xl font-extrabold mb-4 fade-in">
                        Welcome to <br />
                        <span className="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-orange-500">SportSphere</span>
                    </h1>
                    <p className="text-lg md:text-xl mb-8 leading-relaxed slide-up-1">
                        The ultimate social platform for sports fans, players, and experts. Connect, share, and experience sports like never before.
                    </p>
                    <div className="flex justify-center items-center slide-up-2">
                        <button onClick={onJoinCommunity} className="px-8 py-3 bg-cyan-500 rounded-full font-semibold text-lg shadow-lg hover:bg-cyan-600 transition-all duration-300 transform hover:scale-105">
                            Join Community
                        </button>
                    </div>
                </div>
            </div>
        );
        
        // --- AUTHENTICATION PAGE ---
        const AuthPage = ({ onAuthSuccess }) => {
            const [isLoginView, setIsLoginView] = useState(false);
            const [authMethod, setAuthMethod] = useState('email');
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [phoneNumber, setPhoneNumber] = useState('');
            const [otp, setOtp] = useState('');
            const [selectedRole, setSelectedRole] = useState('Fan');
            const [error, setError] = useState('');
            const [showOtpInput, setShowOtpInput] = useState(false);
            const [confirmationResult, setConfirmationResult] = useState(null);

            const roles = ['Fan', 'Player', 'Reporter', 'Analyst', 'Team', 'Sponsor'];
            const auth = firebase.auth();
            const db = firebase.firestore();

            useEffect(() => {
                window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
                    'size': 'invisible',
                    'callback': (response) => {}
                });
            }, []);

            const handleGoogleSignIn = async () => {
                const provider = new firebase.auth.GoogleAuthProvider();
                try {
                    const result = await auth.signInWithPopup(provider);
                    const user = result.user;
                    if (result.additionalUserInfo.isNewUser) {
                        await db.collection("profiles").doc(user.uid).set({
                            email: user.email,
                            name: user.displayName,
                            role: 'Fan',
                            avatar: user.photoURL || `https://placehold.co/128x128/34D399/FFFFFF?text=${user.displayName.charAt(0)}`,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        });
                    }
                    onAuthSuccess();
                } catch (err) {
                    setError(err.message);
                }
            };

            const handlePhoneSubmit = async (e) => {
                e.preventDefault();
                setError('');
                const appVerifier = window.recaptchaVerifier;
                try {
                    const result = await auth.signInWithPhoneNumber(phoneNumber, appVerifier);
                    setConfirmationResult(result);
                    setShowOtpInput(true);
                    setError('OTP has been sent to your phone.');
                } catch (err) {
                    setError(err.message);
                    window.recaptchaVerifier.render().then(widgetId => grecaptcha.reset(widgetId));
                }
            };

            const handleOtpSubmit = async (e) => {
                e.preventDefault();
                setError('');
                try {
                    const result = await confirmationResult.confirm(otp);
                    const user = result.user;
                    const profileDoc = await db.collection('profiles').doc(user.uid).get();
                    if (!profileDoc.exists) {
                         await db.collection("profiles").doc(user.uid).set({
                            phoneNumber: user.phoneNumber,
                            role: 'Fan',
                            name: `User_${user.uid.substring(0,6)}`,
                            avatar: `https://placehold.co/128x128/818CF8/FFFFFF?text=U`,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        });
                    }
                    onAuthSuccess();
                } catch (err) {
                    setError(err.message);
                }
            };

            const handleEmailSubmit = async (e) => {
                e.preventDefault();
                setError('');
                if (isLoginView) {
                    try {
                        await auth.signInWithEmailAndPassword(email, password);
                        onAuthSuccess();
                    } catch (err) {
                        setError(err.message);
                    }
                } else {
                    try {
                        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                        const user = userCredential.user;
                        await user.sendEmailVerification();
                        setError("Registration successful! A verification link has been sent to your email.");
                        await db.collection("profiles").doc(user.uid).set({
                            email: user.email,
                            role: selectedRole,
                            name: email.split('@')[0],
                            avatar: `https://placehold.co/128x128/FBBF24/FFFFFF?text=${email.charAt(0).toUpperCase()}`,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        });
                    } catch (err) {
                        setError(err.message);
                    }
                }
            };

            return (
                <div className="relative w-full min-h-screen flex flex-col justify-center items-center text-center p-4" style={{ backgroundImage: 'url(https://placehold.co/1920x1080/000000/fff?text=SportSphere+Stadium)', backgroundSize: 'cover', backgroundPosition: 'center' }}>
                    <div id="recaptcha-container"></div>
                    <div className="absolute inset-0 bg-black bg-opacity-70 backdrop-blur-md"></div>
                    <div className="relative z-10 text-white max-w-md mx-auto w-full bg-gray-900 bg-opacity-50 p-8 rounded-2xl shadow-lg">
                        <h1 className="text-4xl font-extrabold mb-4">{isLoginView ? 'Welcome Back' : 'Join SportSphere'}</h1>
                        <button onClick={handleGoogleSignIn} className="w-full mb-4 py-3 bg-white text-gray-800 font-semibold rounded-lg flex items-center justify-center space-x-2 hover:bg-gray-200 transition-colors">
                            <svg className="w-6 h-6" viewBox="0 0 48 48"><path fill="#4285F4" d="M24 9.5c3.9 0 6.8 1.6 8.4 3.1l6.3-6.3C34.9 2.6 30 .5 24 .5 14.9.5 7.7 6.4 4.9 14.5l7.6 5.9c1.3-4 5.1-7 9.5-7z"></path><path fill="#34A853" d="M46.2 25.4c0-1.7-.2-3.4-.5-5H24v9.3h12.4c-.5 3-2.1 5.6-4.6 7.3l7.6 5.9c4.4-4.1 7-10 7-17.5z"></path><path fill="#FBBC05" d="M12.5 29.8c-.5-1.5-.8-3.1-.8-4.8s.3-3.3.8-4.8l-7.6-5.9C3.1 18.5 2 21.2 2 24s1.1 5.5 3.9 8.2l7.6-5.9z"></path><path fill="#EA4335" d="M24 47.5c6 0 11.1-2 14.8-5.4l-7.6-5.9c-2 1.3-4.5 2.1-7.2 2.1-4.4 0-8.2-3-9.5-7L4.9 33.5C7.7 41.6 14.9 47.5 24 47.5z"></path><path fill="none" d="M0 0h48v48H0z"></path></svg>
                            <span>Sign in with Google</span>
                        </button>
                        <div className="flex items-center my-4"><hr className="flex-grow border-gray-600"/><span className="mx-2 text-gray-400">OR</span><hr className="flex-grow border-gray-600"/></div>
                        {!showOtpInput && (<div className="flex justify-center bg-gray-700 rounded-lg p-1 mb-4"><button onClick={() => setAuthMethod('email')} className={`w-1/2 py-2 rounded-md ${authMethod === 'email' ? 'bg-cyan-500' : ''}`}>Email</button><button onClick={() => setAuthMethod('phone')} className={`w-1/2 py-2 rounded-md ${authMethod === 'phone' ? 'bg-cyan-500' : ''}`}>Phone</button></div>)}
                        {authMethod === 'email' && !showOtpInput && (<form onSubmit={handleEmailSubmit} className="space-y-4"><input type="email" placeholder="Email Address" value={email} onChange={(e) => setEmail(e.target.value)} className="w-full p-3 rounded-lg bg-gray-700" required/><input type="password" placeholder="Password" value={password} onChange={(e) => setPassword(e.target.value)} className="w-full p-3 rounded-lg bg-gray-700" required/>{!isLoginView && (<select value={selectedRole} onChange={(e) => setSelectedRole(e.target.value)} className="w-full p-3 rounded-lg bg-gray-700"><option disabled>Choose Role</option>{roles.map(r => <option key={r} value={r}>{r}</option>)}</select>)}<button type="submit" className="w-full py-3 bg-cyan-600 rounded-lg font-semibold hover:bg-cyan-700">{isLoginView ? 'Log In' : 'Register with Email'}</button></form>)}
                        {authMethod === 'phone' && !showOtpInput && (<form onSubmit={handlePhoneSubmit} className="space-y-4"><input type="tel" placeholder="+1 555-555-5555" value={phoneNumber} onChange={(e) => setPhoneNumber(e.target.value)} className="w-full p-3 rounded-lg bg-gray-700" required/><button type="submit" className="w-full py-3 bg-cyan-600 rounded-lg font-semibold hover:bg-cyan-700">Send OTP</button></form>)}
                        {showOtpInput && (<form onSubmit={handleOtpSubmit} className="space-y-4"><p className="text-sm text-gray-300">Enter the OTP sent to {phoneNumber}</p><input type="text" placeholder="6-digit OTP" value={otp} onChange={(e) => setOtp(e.target.value)} className="w-full p-3 rounded-lg bg-gray-700" required/><button type="submit" className="w-full py-3 bg-cyan-600 rounded-lg font-semibold hover:bg-cyan-700">Verify & Sign In</button></form>)}
                        {error && <p className="text-red-400 mt-4">{error}</p>}
                        <p className="mt-6">{isLoginView ? "Don't have an account? " : "Already have an account? "}<button onClick={() => { setIsLoginView(!isLoginView); setError('') }} className="font-semibold text-cyan-400 hover:underline">{isLoginView ? 'Register' : 'Log In'}</button></p>
                    </div>
                </div>
            );
        };

        // --- ROLE-BASED PROFILE COMPONENTS ---
        const ProfileHeader = ({ data }) => (
            <div className="flex flex-col sm:flex-row items-center text-center sm:text-left mb-6">
                <img src={data.avatar} alt={`${data.name} profile`} className="w-32 h-32 rounded-full border-4 border-cyan-500 mb-4 sm:mb-0 sm:mr-8" onError={(e) => { e.target.onerror = null; e.target.src='https://placehold.co/128x128/1f2937/4b5563?text=A'; }} />
                <div className="flex-grow">
                    <h1 className="text-4xl font-extrabold text-white">{data.name}</h1>
                    <p className="text-lg text-cyan-400 mt-1">{data.role}</p>
                    <p className="text-gray-400 mt-3">{data.bio || "No bio available."}</p>
                </div>
            </div>
        );

        const FanProfile = ({ data }) => (
            <div>
                <ProfileHeader data={data} />
                <div className="mt-6 border-t border-gray-700 pt-6">
                     <h3 className="text-xl font-bold text-white mb-4">Activity</h3>
                     <p className="text-gray-500">Your recent posts and interactions will appear here.</p>
                </div>
            </div>
        );

        const PlayerProfile = ({ data }) => (
             <div>
                <ProfileHeader data={data} />
                <div className="mt-6 border-t border-gray-700 pt-6 grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 className="text-xl font-bold text-white mb-4">Career Stats</h3>
                        <div className="space-y-2 text-gray-300">
                           {data.careerStats ? data.careerStats.map(stat => <p key={stat.label}><strong className="font-semibold text-white">{stat.label}:</strong> {stat.value}</p>) : <p>No stats available.</p>}
                        </div>
                    </div>
                    <div>
                        <h3 className="text-xl font-bold text-white mb-4">Achievements</h3>
                        <ul className="list-disc list-inside space-y-2 text-gray-300">
                            {data.achievements ? data.achievements.map(ach => <li key={ach}>{ach}</li>) : <li>No achievements listed.</li>}
                        </ul>
                    </div>
                </div>
            </div>
        );
        
        const TeamProfile = ({ data }) => (
            <div>
                <ProfileHeader data={data} />
                 <div className="mt-6 border-t border-gray-700 pt-6">
                     <h3 className="text-xl font-bold text-white mb-4">Team Roster</h3>
                     <p className="text-gray-500">Player roster will be displayed here.</p>
                </div>
            </div>
        );

        const DefaultProfile = ({ data }) => (
            <div>
                <ProfileHeader data={data} />
                <div className="mt-6 border-t border-gray-700 pt-6">
                    <p className="text-gray-500">This is a profile for a {data.role}. More specific details will be shown here.</p>
                </div>
            </div>
        );
        
        // --- API-POWERED COMPONENTS ---

        const Poll = ({ pollData }) => {
          const [voted, setVoted] = useState(false);
          const [votes, setVotes] = useState(pollData.options.map(o => o.votes));
          const totalVotes = votes.reduce((a, b) => a + b, 0);

          const handleVote = (index) => {
            if (voted) return;
            const newVotes = [...votes];
            newVotes[index]++;
            setVotes(newVotes);
            setVoted(true);
          };

          return (
            <div className="mt-4 border-t border-gray-700 pt-4">
              <h4 className="font-semibold text-white mb-3">{pollData.question}</h4>
              <div className="space-y-2">
                {pollData.options.map((option, index) => {
                  const percentage = totalVotes > 0 ? Math.round((votes[index] / totalVotes) * 100) : 0;
                  return (
                    <div key={index}>
                      {!voted ? (
                        <button onClick={() => handleVote(index)} className="w-full text-left p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors duration-200">
                          {option.text}
                        </button>
                      ) : (
                        <div className="bg-gray-700 rounded-lg p-2 relative overflow-hidden">
                          <div className="bg-cyan-500/30 h-full absolute top-0 left-0" style={{ width: `${percentage}%` }}></div>
                          <div className="flex justify-between text-sm font-semibold relative z-10">
                            <span>{option.text}</span>
                            <span>{percentage}%</span>
                          </div>
                        </div>
                      )}
                    </div>
                  );
                })}
              </div>
              {voted && <p className="text-xs text-gray-500 mt-2 text-right">{totalVotes.toLocaleString()} votes</p>}
            </div>
          );
        };

        const PollToWin = ({ pollData, game }) => {
            const [votedFor, setVotedFor] = useState(null);
            const [votes, setVotes] = useState({ team1: pollData.team1Votes, team2: pollData.team2Votes });
            const totalVotes = votes.team1 + votes.team2;
            const prizePool = totalVotes * 1.00;
            const winnersShare = prizePool * 0.70;

            const handleVote = (team) => {
                if (votedFor) return;
                setVotedFor(team);
                setVotes(prevVotes => ({ ...prevVotes, [team]: prevVotes[team] + 1 }));
            };

            const getPercentage = (teamVotes) => totalVotes === 0 ? 0 : Math.round((teamVotes / totalVotes) * 100);
            const team1Percentage = getPercentage(votes.team1);
            const team2Percentage = getPercentage(votes.team2);
            const potentialWinnings = votedFor ? (winnersShare / votes[votedFor]).toFixed(2) : 0;

            return (
                <div className="mt-4 border-t-2 border-dashed border-cyan-500/30 pt-4">
                    <div className="text-center mb-4">
                        <h4 className="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-orange-500">POLL-TO-WIN</h4>
                        <p className="text-sm text-gray-400">Vote for $1 and win a share of the prize pool!</p>
                        <div className="mt-2 text-3xl font-bold text-emerald-400">${prizePool.toFixed(2)}</div>
                        <p className="text-xs text-gray-500">Prize Pool</p>
                    </div>
                    {!votedFor ? (
                        <div className="grid grid-cols-2 gap-3">
                            <button onClick={() => handleVote('team1')} className="w-full text-center p-3 bg-gray-700 rounded-lg hover:bg-cyan-600 transition-all duration-200 transform hover:scale-105 shadow-md">
                                <span className="font-semibold">{game.team1Name}</span><span className="block text-xs text-gray-300">Vote ($1.00)</span>
                            </button>
                            <button onClick={() => handleVote('team2')} className="w-full text-center p-3 bg-gray-700 rounded-lg hover:bg-cyan-600 transition-all duration-200 transform hover:scale-105 shadow-md">
                                <span className="font-semibold">{game.team2Name}</span><span className="block text-xs text-gray-300">Vote ($1.00)</span>
                            </button>
                        </div>
                    ) : (
                        <div className="space-y-3">
                            <div className="text-center mb-4 p-2 bg-gray-700/50 rounded-lg">
                                <p className="text-sm text-gray-300">You voted for <span className="font-bold text-cyan-400">{votedFor === 'team1' ? game.team1Name : game.team2Name}</span>.</p>
                                <p className="text-lg font-semibold text-white">Potential Win: <span className="text-emerald-400">${potentialWinnings}</span></p>
                            </div>
                            <div className={`bg-gray-700 rounded-lg p-2 relative overflow-hidden border-2 ${votedFor === 'team1' ? 'border-cyan-400' : 'border-transparent'}`}><div className="absolute top-0 left-0 h-full bg-blue-500/50" style={{ width: `${team1Percentage}%` }}></div><div className="relative z-10 flex justify-between items-center text-sm font-semibold"><span>{votedFor === 'team1' && 'âœ” '}{game.team1Name}</span><span>{team1Percentage}%</span></div></div>
                            <div className={`bg-gray-700 rounded-lg p-2 relative overflow-hidden border-2 ${votedFor === 'team2' ? 'border-cyan-400' : 'border-transparent'}`}><div className="absolute top-0 left-0 h-full bg-orange-500/50" style={{ width: `${team2Percentage}%` }}></div><div className="relative z-10 flex justify-between items-center text-sm font-semibold"><span>{votedFor === 'team2' && 'âœ” '}{game.team2Name}</span><span>{team2Percentage}%</span></div></div>
                            <p className="text-xs text-gray-500 mt-2 text-right">{totalVotes.toLocaleString()} total votes</p>
                        </div>
                    )}
                </div>
            );
        };
        
        const PlayerPoll = ({ category, players, onVote }) => {
            const [votedPlayer, setVotedPlayer] = useState(null);
            const [votes, setVotes] = useState(players.map(p => p.initialVotes));
            const totalVotes = votes.reduce((sum, v) => sum + v, 0);

            const handleVote = (index, playerId) => {
                if (votedPlayer) return;
                const newVotes = [...votes];
                newVotes[index]++;
                setVotes(newVotes);
                setVotedPlayer(playerId);
            };

            return (
                <div className="bg-gray-800 rounded-xl shadow-lg p-4 mb-4 border border-gray-700">
                    <h3 className="text-xl font-bold text-white mb-4">{category} Poll</h3>
                    <div className="space-y-3">
                        {players.map((player, index) => {
                            const percentage = totalVotes > 0 ? ((votes[index] / totalVotes) * 100).toFixed(1) : 0;
                            return (
                                <div key={player.id} className="relative">
                                    <button onClick={() => handleVote(index, player.id)} disabled={!!votedPlayer} className={`w-full text-left p-3 rounded-lg transition-colors duration-200 ${votedPlayer === player.id ? 'bg-cyan-700 border-2 border-cyan-400' : 'bg-gray-700 hover:bg-gray-600'} ${votedPlayer ? 'opacity-70 cursor-not-allowed' : ''}`}>
                                        <div className="flex items-center justify-between"><span className="font-semibold text-white">{player.name}</span>{votedPlayer && <span className="text-sm text-gray-300">{percentage}%</span>}</div>
                                    </button>
                                    {votedPlayer && (<div className="absolute top-0 left-0 h-full bg-cyan-500/30 rounded-lg" style={{ width: `${percentage}%` }}></div>)}
                                </div>
                            );
                        })}
                    </div>
                    {votedPlayer && (<p className="text-xs text-gray-500 mt-2 text-right">Total votes: {totalVotes}</p>)}
                </div>
            );
        };

        const AIGameAnalyst = ({ game }) => {
            const [aiInsight, setAiInsight] = useState("");
            const [isLoading, setIsLoading] = useState(false);

            const fetchAiInsight = (team1, team2) => {
                setIsLoading(true);
                setTimeout(() => {
                    const insights = [ `AI predicts ${team1} has a 75% chance to win!`, `AI suggests a key player to watch from ${team2}.`, `AI recommends focusing on defense for ${team1}.`];
                    setAiInsight(insights[Math.floor(Math.random() * insights.length)]);
                    setIsLoading(false);
                }, 1500);
            };

            useEffect(() => {
                fetchAiInsight(game.team1Name, game.team2Name);
            }, [game.id]);

            return (
                <div className="p-3 bg-gray-800 rounded-lg mt-4 border-l-4 border-cyan-500 text-gray-300">
                    <p className="font-bold text-cyan-400">âš¡ AI Analyst Suggests:</p>
                    {isLoading ? <p className="text-sm animate-pulse">Analyzing match...</p> : <p className="text-sm">"{aiInsight}"</p>}
                </div>
            );
        };

        const LiveGameCard = ({ game }) => (
          <div className="bg-gray-800 rounded-xl shadow-lg p-4 mb-4 border border-gray-700">
            <div className="flex justify-between items-center mb-4">
              <div className="flex items-center space-x-2"><span className="px-2 py-1 bg-red-600 text-white text-xs font-bold rounded-md">LIVE</span><span className="text-sm font-semibold text-gray-300">{game.league}</span></div>
              <div className="flex items-center space-x-1 text-sm text-gray-400"><svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"></path></svg><span>{game.viewers}</span></div>
            </div>
            <div className="space-y-3 mb-4">
              <div className="flex justify-between items-center"><div className="flex items-center space-x-3"><div className="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-sm">{game.team1Name.substring(0, 2).toUpperCase()}</div><span className="font-semibold text-white text-lg">{game.team1Name}</span></div><span className="font-bold text-2xl text-white">{game.score1}</span></div>
              <div className="flex justify-between items-center"><div className="flex items-center space-x-3"><div className="w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold text-sm">{game.team2Name.substring(0, 2).toUpperCase()}</div><span className="font-semibold text-white text-lg">{game.team2Name}</span></div><span className="font-bold text-2xl text-white">{game.score2}</span></div>
            </div>
            <div className="flex justify-center my-4"><div className="bg-gray-700 text-gray-300 text-sm font-semibold px-3 py-1 rounded-full flex items-center space-x-1.5"><svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l3 3a1 1 0 001.414-1.414L11 10.586V7z" clipRule="evenodd"></path></svg><span>{game.time}</span></div></div>
            {game.pollToWin && <PollToWin pollData={game.pollToWin} game={game} />}
            {game.poll && <Poll pollData={game.poll} />}
            <AIGameAnalyst game={game} />
          </div>
        );

        const LiveGames = () => {
          const [games, setGames] = useState([]);
          const [isLoading, setIsLoading] = useState(true);

          useEffect(() => {
            const fetchGames = async () => {
              setIsLoading(true);
              // IMPORTANT: Replace with your API-Football key
              const apiKey = 'YOUR_API_FOOTBALL_KEY'; 
              const url = 'https://v3.football.api-sports.io/fixtures?live=all';
              try {
                const response = await fetch(url, { headers: { 'x-rapidapi-key': apiKey, 'x-rapidapi-host': 'v3.football.api-sports.io' } });
                const data = await response.json();
                if (data.response && data.response.length > 0) {
                  const formattedGames = data.response.map(game => ({
                    id: game.fixture.id,
                    league: game.league.name,
                    viewers: `${(Math.random() * 2 + 0.5).toFixed(1)}M`,
                    team1Name: game.teams.home.name,
                    score1: game.goals.home,
                    team2Name: game.teams.away.name,
                    score2: game.goals.away,
                    time: `${game.fixture.status.elapsed}'`,
                    poll: { question: `Who will win: ${game.teams.home.name} vs ${game.teams.away.name}?`, options: [{ text: game.teams.home.name, votes: Math.floor(Math.random() * 2000) }, { text: game.teams.away.name, votes: Math.floor(Math.random() * 2000) }] },
                    pollToWin: { team1Votes: Math.floor(Math.random() * 5000), team2Votes: Math.floor(Math.random() * 5000) }
                  }));
                  setGames(formattedGames);
                } else {
                  setGames([]); // No live games
                }
              } catch (error) {
                console.error("Failed to fetch live games:", error);
                setGames([]); // Set to empty on error
              } finally {
                setIsLoading(false);
              }
            };
            fetchGames();
          }, []);

          return (
            <div className="p-4 md:p-8">
              <div className="max-w-4xl mx-auto">
                <h2 className="text-3xl font-bold text-white mb-6">Live Games</h2>
                {isLoading ? <p>Loading live games...</p> : games.length > 0 ? games.map((game) => (<LiveGameCard key={game.id} game={game} />)) : <p>No live games at the moment.</p>}
                <h3 className="text-2xl font-bold mb-4 text-white mt-8">Player Polls</h3>
                <PlayerPoll category="Best Player of the Day (Football)" players={mockData.playersForPolls.Football} />
                <PlayerPoll category="Best MVP (Basketball)" players={mockData.playersForPolls.Basketball} />
              </div>
            </div>
          );
        };

        const NewsArticleCard = ({ article }) => (
          <div className="bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-700">
            <div className="flex items-center space-x-2 mb-3">
              {article.breaking && <span className="px-2 py-1 bg-red-600 text-white text-xs font-bold rounded-md">BREAKING</span>}
              <span className="px-2 py-1 bg-gray-700 text-gray-300 text-xs font-semibold rounded-md">{article.category}</span>
            </div>
            <h3 className="text-xl font-bold mb-2 text-white hover:text-cyan-500 transition-colors duration-200 cursor-pointer">{article.title}</h3>
            <div className="flex items-center justify-between text-sm text-gray-400">
              <span>{article.source} â€¢ {article.time}</span><span>{article.views} views</span>
            </div>
          </div>
        );

        const AINewsEditor = ({ onRefreshNews }) => {
            const [isLoading, setIsLoading] = useState(false);
            const handleRefresh = async () => {
                setIsLoading(true);
                // The parent component (NewsSection) will handle the actual API call
                await onRefreshNews();
                setIsLoading(false);
            };
            return (
                <div className="mb-6 p-4 bg-gray-800 rounded-xl border border-gray-700">
                    <h3 className="font-bold text-white">AI News Editor</h3>
                    <p className="text-sm text-gray-400 mb-3">Curate your feed with AI based on your preferences.</p>
                    <button onClick={handleRefresh} className="w-full bg-cyan-600 hover:bg-cyan-700 p-2 rounded-lg text-sm text-white flex items-center justify-center" disabled={isLoading}>
                        {isLoading ? <span className="animate-spin mr-2">ðŸ”„</span> : 'ðŸ”„'} Refresh with AI
                    </button>
                </div>
            );
        };

        const NewsSection = () => {
          const [articles, setArticles] = useState([]);
          const [isLoading, setIsLoading] = useState(true);

          const fetchNews = async () => {
            setIsLoading(true);
            // IMPORTANT: Replace with your NewsAPI.org key
            const apiKey = 'YOUR_NEWS_API_KEY';
            const url = `https://newsapi.org/v2/top-headlines?country=us&category=sports&apiKey=${apiKey}`;
            try {
              const response = await fetch(url);
              const data = await response.json();
              if (data.articles) {
                const formattedArticles = data.articles.map((article, index) => ({
                  id: `news_${index}`,
                  category: 'Sports',
                  title: article.title,
                  source: article.source.name,
                  time: new Date(article.publishedAt).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                  views: `${Math.floor(Math.random() * 20)}K`,
                  breaking: Math.random() > 0.85
                }));
                setArticles(formattedArticles);
              }
            } catch (error) {
              console.error("Failed to fetch news:", error);
            } finally {
              setIsLoading(false);
            }
          };

          useEffect(() => {
            fetchNews();
          }, []);

          return (
            <div className="p-4 md:p-8">
              <div className="max-w-4xl mx-auto">
                <h2 className="text-3xl font-bold mb-6 text-white">Latest News</h2>
                <AINewsEditor onRefreshNews={fetchNews} />
                <div className="space-y-4">
                  {isLoading ? <p>Loading news...</p> : articles.length > 0 ? articles.map(article => <NewsArticleCard key={article.id} article={article} />) : <p>No news available.</p>}
                </div>
              </div>
            </div>
          );
        };

        // --- SHOP COMPONENTS ---
        const ProductCard = ({ product, onAddToCart, onViewDetail }) => (
          <div className="bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700 flex flex-col">
            <div className="relative w-full h-56 bg-gray-700">
              {product.sale && (
                <span className="absolute top-3 left-3 px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-md z-10">SALE</span>
              )}
              <img src={product.imageUrl} alt={product.name} className="w-full h-full object-cover" onError={(e) => { e.target.onerror = null; e.target.src='https://placehold.co/400x400/1f2937/4b5563?text=Image+Not+Found'; }} />
            </div>
            <div className="p-4 flex flex-col flex-grow">
              <div className="flex justify-between items-center mb-2">
                <span className="px-2 py-1 bg-gray-700 text-gray-300 text-xs font-semibold rounded-md">{product.category}</span>
                <div className="flex items-center text-sm text-gray-400" aria-label={`${product.rating} out of 5 stars, based on ${product.reviews} reviews`}>
                  <svg className="w-4 h-4 text-yellow-400 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.538 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.783.57-1.838-.197-1.538-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.381-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z"></path></svg>
                  <span>{product.rating} ({product.reviews})</span>
                </div>
              </div>
              <h3 className="text-lg font-bold text-white mb-1">{product.name}</h3>
              <p className="text-gray-400 text-sm mb-4 flex-grow">{product.description}</p>
              <div className="flex items-baseline space-x-2 mb-4">
                <span className="text-2xl font-bold text-cyan-500">${product.price.toFixed(2)}</span>
                {product.oldPrice && <span className="text-gray-500 line-through">${product.oldPrice.toFixed(2)}</span>}
              </div>
              <div className="flex space-x-3">
                <button onClick={() => onAddToCart({ ...product, quantity: 1 })} className="flex items-center justify-center flex-1 py-3 bg-cyan-500 rounded-lg font-semibold text-white hover:bg-cyan-600 transition-colors duration-200">
                  Add to Cart
                </button>
                <button onClick={() => onViewDetail(product)} className="px-5 py-3 bg-gray-700 rounded-lg font-semibold text-gray-300 hover:bg-gray-600 transition-colors duration-200">
                  View
                </button>
              </div>
            </div>
          </div>
        );

        const ProductDetailModal = ({ product, onAddToCart, onClose }) => {
            const [quantity, setQuantity] = useState(1);
            return (
                <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[100]">
                    <div className="bg-gray-800 rounded-xl shadow-lg p-6 md:p-8 w-11/12 max-w-2xl border border-gray-700 relative overflow-y-auto max-h-[90vh]">
                        <button onClick={onClose} className="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl p-2 rounded-full">&times;</button>
                        <div className="flex flex-col md:flex-row gap-6">
                            <div className="md:w-1/2">
                                <img src={product.imageUrl} alt={product.name} className="w-full h-auto object-cover rounded-lg shadow-md" />
                            </div>
                            <div className="md:w-1/2 flex flex-col justify-between">
                                <div>
                                    <h2 className="text-3xl font-bold text-white mb-2">{product.name}</h2>
                                    <p className="text-gray-400 text-sm mb-4">{product.category}</p>
                                    <div className="flex items-baseline space-x-2 mb-4">
                                        <span className="text-3xl font-bold text-cyan-500">${product.price.toFixed(2)}</span>
                                        {product.oldPrice && <span className="text-gray-500 line-through">${product.oldPrice.toFixed(2)}</span>}
                                    </div>
                                    <p className="text-gray-300 mb-6">{product.description}</p>
                                    <div className="flex items-center mt-4">
                                        <p className="text-gray-300 text-sm font-semibold mr-4">Quantity:</p>
                                        <button onClick={() => setQuantity(prev => Math.max(1, prev - 1))} className="p-2 rounded-full bg-gray-700 hover:bg-gray-600 text-white">-</button>
                                        <span className="mx-3 text-lg font-bold text-white">{quantity}</span>
                                        <button onClick={() => setQuantity(prev => prev + 1)} className="p-2 rounded-full bg-gray-700 hover:bg-gray-600 text-white">+</button>
                                    </div>
                                </div>
                                <button onClick={() => onAddToCart({ ...product, quantity })} className="w-full py-3 bg-cyan-500 rounded-lg font-semibold text-white hover:bg-cyan-600 transition-colors duration-200 mt-6">
                                    Add {quantity} to Cart - ${(product.price * quantity).toFixed(2)}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ShoppingCart = ({ cartItems, onRemoveItem, onUpdateQuantity, onClose }) => {
            const subtotal = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const shipping = 5.00;
            const total = subtotal + shipping;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[100]">
                    <div className="bg-gray-800 rounded-xl shadow-lg p-6 md:p-8 w-11/12 max-w-lg border border-gray-700 relative">
                        <button onClick={onClose} className="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl p-2 rounded-full">&times;</button>
                        <h3 className="text-xl font-bold text-white mb-4">Your Cart</h3>
                        {cartItems.length === 0 ? (
                            <p className="text-gray-400 text-center py-8">Your cart is empty.</p>
                        ) : (
                            <div className="space-y-4 max-h-80 overflow-y-auto custom-scrollbar pr-2">
                                {cartItems.map(item => (
                                    <div key={item.id} className="bg-gray-700 p-3 rounded-lg flex items-center">
                                        <img src={item.imageUrl} alt={item.name} className="w-16 h-16 object-cover rounded-md mr-4" />
                                        <div className="flex-grow">
                                            <p className="font-semibold text-white">{item.name}</p>
                                            <p className="text-sm text-gray-300">${item.price.toFixed(2)}</p>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <button onClick={() => onUpdateQuantity(item.id, item.quantity - 1)} disabled={item.quantity <= 1} className="p-1 rounded-full bg-gray-600 hover:bg-gray-500 text-white disabled:opacity-50">-</button>
                                            <span className="text-white font-medium">{item.quantity}</span>
                                            <button onClick={() => onUpdateQuantity(item.id, item.quantity + 1)} className="p-1 rounded-full bg-gray-600 hover:bg-gray-500 text-white">+</button>
                                            <button onClick={() => onRemoveItem(item.id)} className="text-red-400 hover:text-red-500 p-1 rounded-full">
                                                <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 11-2 0v6a1 1 0 112 0V8z" clipRule="evenodd"></path></svg>
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                        <div className="mt-6 border-t border-gray-600 pt-4">
                            <div className="flex justify-between text-gray-300 text-sm mb-1"><span>Subtotal:</span><span>${subtotal.toFixed(2)}</span></div>
                            <div className="flex justify-between text-gray-300 text-sm mb-3"><span>Shipping:</span><span>${shipping.toFixed(2)}</span></div>
                            <div className="flex justify-between text-xl font-bold text-white"><span>Total:</span><span>${total.toFixed(2)}</span></div>
                            <button disabled={cartItems.length === 0} className="w-full mt-6 py-3 bg-cyan-500 rounded-lg font-semibold text-white hover:bg-cyan-600 transition-colors duration-200 disabled:opacity-50">Checkout</button>
                        </div>
                    </div>
                </div>
            );
        };

        const ShopSection = () => {
            const [products, setProducts] = useState([]);
            const [categories, setCategories] = useState([]);
            const [activeCategory, setActiveCategory] = useState('All Products');
            const [isLoading, setIsLoading] = useState(true);
            const [cartItems, setCartItems] = useState([]);
            const [showCart, setShowCart] = useState(false);
            const [selectedProduct, setSelectedProduct] = useState(null);

            useEffect(() => {
                const fetchProducts = async () => {
                    setIsLoading(true);
                    try {
                        const response = await fetch('https://fakestoreapi.com/products');
                        const data = await response.json();
                        const formattedProducts = data.map(p => ({ ...p, imageUrl: p.image, rating: p.rating.rate, reviews: p.rating.count, sale: Math.random() > 0.7, oldPrice: p.price * 1.25, description: p.description.substring(0, 100) + '...' }));
                        setProducts(formattedProducts);
                        const uniqueCategories = ['All Products', ...new Set(data.map(p => p.category))];
                        setCategories(uniqueCategories);
                    } catch (error) {
                        console.error("Failed to fetch products:", error);
                    } finally {
                        setIsLoading(false);
                    }
                };
                fetchProducts();
            }, []);

            const filteredProducts = activeCategory === 'All Products' ? products : products.filter(p => p.category === activeCategory);

            const handleAddToCart = (product) => {
                setCartItems(prevItems => {
                    const existingItem = prevItems.find(item => item.id === product.id);
                    if (existingItem) {
                        return prevItems.map(item => item.id === product.id ? { ...item, quantity: item.quantity + product.quantity } : item);
                    }
                    return [...prevItems, product];
                });
            };

            const handleRemoveFromCart = (productId) => {
                setCartItems(prevItems => prevItems.filter(item => item.id !== productId));
            };

            const handleUpdateQuantity = (productId, quantity) => {
                if (quantity < 1) {
                    handleRemoveFromCart(productId);
                    return;
                }
                setCartItems(prevItems => prevItems.map(item => item.id === productId ? { ...item, quantity } : item));
            };

            return (
                <div className="p-4 md:p-8">
                    <div className="max-w-7xl mx-auto">
                        <h2 className="text-3xl font-bold text-white mb-6">Shop</h2>
                        <div className="md:flex md:space-x-8">
                            <aside className="md:w-1/4 lg:w-1/5 mb-8 md:mb-0">
                                <div className="bg-gray-800 rounded-xl p-4 border border-gray-700">
                                    <h3 className="text-lg font-bold mb-4 text-white">Categories</h3>
                                    <div className="space-y-2">
                                        {categories.map(cat => (
                                            <button key={cat} onClick={() => setActiveCategory(cat)} className={`w-full text-left p-3 rounded-lg transition-colors duration-200 ${activeCategory === cat ? 'bg-cyan-500 text-white font-semibold' : 'text-gray-300 hover:bg-gray-700'}`}>
                                                {cat}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </aside>
                            <main className="md:w-3/4 lg:w-4/5">
                                {isLoading ? <p>Loading products...</p> : (
                                    <div className="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
                                        {filteredProducts.map(product => (<ProductCard key={product.id} product={product} onAddToCart={handleAddToCart} onViewDetail={setSelectedProduct} />))}
                                    </div>
                                )}
                            </main>
                        </div>
                    </div>
                    {showCart && <ShoppingCart cartItems={cartItems} onRemoveItem={handleRemoveFromCart} onUpdateQuantity={handleUpdateQuantity} onClose={() => setShowCart(false)} />}
                    {selectedProduct && <ProductDetailModal product={selectedProduct} onAddToCart={handleAddToCart} onClose={() => setSelectedProduct(null)} />}
                </div>
            );
        };
        
        // --- MAIN APP ---
        function App() {
            const [user, setUser] = useState(null);
            const [profileData, setProfileData] = useState(null);
            const [isLoading, setIsLoading] = useState(true);
            const [activeTab, setActiveTab] = useState('home');
            const [appState, setAppState] = useState('landing');

            useEffect(() => {
                const unsubscribe = firebase.auth().onAuthStateChanged(async (user) => {
                    if (user) {
                        setUser(user);
                        const profileRef = firebase.firestore().collection('profiles').doc(user.uid);
                        const doc = await profileRef.get();
                        if (doc.exists) {
                            setProfileData(doc.data());
                        } else {
                            const defaultData = { email: user.email || '', name: user.displayName || `User_${user.uid.substring(0,6)}`, role: 'Fan', avatar: user.photoURL || `https://placehold.co/128x128/34D399/FFFFFF?text=U`, createdAt: firebase.firestore.FieldValue.serverTimestamp() };
                            await profileRef.set(defaultData);
                            setProfileData(defaultData);
                        }
                        setAppState('mainApp');
                    } else {
                        setUser(null);
                        setProfileData(null);
                    }
                    setIsLoading(false);
                });
                return () => unsubscribe();
            }, []);

            const handleLogout = () => {
                firebase.auth().signOut().then(() => setAppState('landing'));
            };

            const renderProfilePage = () => {
                if (!profileData) return <div className="text-center p-8">Loading profile...</div>;
                switch(profileData.role) {
                    case 'Fan': return <FanProfile data={profileData} />;
                    case 'Player': return <PlayerProfile data={profileData} />;
                    case 'Team': return <TeamProfile data={profileData} />;
                    default: return <DefaultProfile data={profileData} />;
                }
            };

            const renderContent = () => {
                switch (activeTab) {
                    case 'home': return <HomeSection />;
                    case 'profile': return renderProfilePage();
                    case 'live': return <LiveGames />;
                    case 'news': return <NewsSection />;
                    case 'shop': return <ShopSection />;
                    case 'moments': return <div className="p-8 text-center"><h1 className="text-2xl">Moments (Sample)</h1></div>;
                    default: return <HomeSection />;
                }
            };

            if (isLoading) {
                return <div className="min-h-screen flex items-center justify-center text-white">Loading...</div>;
            }

            if (appState === 'landing') {
                return <AnimatedLandingPage onJoinCommunity={() => setAppState('auth')} />;
            }

            if (appState === 'auth') {
                return <AuthPage onAuthSuccess={() => setAppState('mainApp')} />;
            }
            
            return (
                <div className="font-sans antialiased bg-gray-900 text-white min-h-screen">
                    <header className="bg-gray-800 p-4 flex justify-between items-center sticky top-0 z-50 border-b border-gray-700">
                        <h1 className="text-xl font-bold text-cyan-400">SportSphere</h1>
                        <nav className="flex items-center space-x-2 md:space-x-4">
                           <button onClick={() => setActiveTab('home')} className={`px-3 py-2 rounded-md text-sm font-medium ${activeTab === 'home' ? 'bg-cyan-500 text-white' : 'text-gray-300 hover:bg-gray-700'}`}>Home</button>
                           <button onClick={() => setActiveTab('live')} className={`px-3 py-2 rounded-md text-sm font-medium ${activeTab === 'live' ? 'bg-cyan-500 text-white' : 'text-gray-300 hover:bg-gray-700'}`}>Live</button>
                           <button onClick={() => setActiveTab('news')} className={`px-3 py-2 rounded-md text-sm font-medium ${activeTab === 'news' ? 'bg-cyan-500 text-white' : 'text-gray-300 hover:bg-gray-700'}`}>News</button>
                           <button onClick={() => setActiveTab('shop')} className={`px-3 py-2 rounded-md text-sm font-medium ${activeTab === 'shop' ? 'bg-cyan-500 text-white' : 'text-gray-300 hover:bg-gray-700'}`}>Shop</button>
                           <button onClick={() => setActiveTab('moments')} className={`px-3 py-2 rounded-md text-sm font-medium ${activeTab === 'moments' ? 'bg-cyan-500 text-white' : 'text-gray-300 hover:bg-gray-700'}`}>Moments</button>
                           <button onClick={() => setActiveTab('profile')} className={`px-3 py-2 rounded-md text-sm font-medium ${activeTab === 'profile' ? 'bg-cyan-500 text-white' : 'text-gray-300 hover:bg-gray-700'}`}>Profile</button>
                           <button onClick={handleLogout} className="bg-red-600 hover:bg-red-700 px-3 py-2 rounded-md text-sm font-medium">Logout</button>
                        </nav>
                    </header>
                    <main className="p-4">
                        {renderContent()}
                    </main>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
